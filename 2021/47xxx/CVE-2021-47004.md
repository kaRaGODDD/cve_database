
# [CVE-2021-47004](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-47004)

## Description

- `In the Linux kernel, the following vulnerability has been resolved:f2fs: fix to avoid touching checkpointed data in get_victim()In CP disabling mode, there are two issues when using LFS or SSR | AT_SSRmode to select victim:1. LFS is set to find source section during GC, the victim should haveno checkpointed data, since after GC, section could not be set free forreuse.Previously, we only check valid chpt blocks in current segment ratherthan section, fix it.2. SSR | AT_SSR are set to find target segment for writes which can befully filled by checkpointed and newly written blocks, we should neverselect such segment, otherwise it can cause panic or data corruptionduring allocation, potential case is described as below: a) target segment has 'n' (n < 512) ckpt valid blocks b) GC migrates 'n' valid blocks to other segment (segment is still    in dirty list) c) GC migrates '512 - n' blocks to target segment (segment has 'n'    cp_vblocks and '512 - n' vblocks) d) If GC selects target segment via {AT,}SSR allocator, however there    is no free space in targe segment.`

## Cvss Data

- **Access Vector**:
  - 
- **Base Score**:
  - 

## Scores

- **Exploitability Score**:
  - 
- **Impact Score**:
  - 
- **Base Severity**:
  - 

## Other Information

- **Publish Date**:
  - 2024-02-28 09:15:38
- **Vulnerability Status**:
  - Awaiting Analysis

## References

- **416baaa9-dc9f-4396-8d5f-8c081fb06d67**: https://git.kernel.org/stable/c/105155a8146ddb54c119d8318964eef3859d109d
- **416baaa9-dc9f-4396-8d5f-8c081fb06d67**: https://git.kernel.org/stable/c/1e116f87825f01a6380286472196882746b16f63
- **416baaa9-dc9f-4396-8d5f-8c081fb06d67**: https://git.kernel.org/stable/c/211372b2571520e394b56b431a0705586013b3ff
- **416baaa9-dc9f-4396-8d5f-8c081fb06d67**: https://git.kernel.org/stable/c/61461fc921b756ae16e64243f72af2bfc2e620db
